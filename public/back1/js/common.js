//滚动条实现,发送ajax请求时开始显示滚动条
$(function(){
	$(document).ajaxStart(function(){
		NProgress.start();
	});
	$(document).ajaxStop(function(){
		NProgress.done();
	});
})
//公用模块
	$(function(){
		// 1.二级菜单切换
		$('.category').click(function(){
			//切换child的显示和隐藏
			$('.second').stop().slideToggle();
		})
		//2.点击右侧切换按钮，切换
		$('.icon_menu').click(function(){
			console.log(111)
			$('.lt_aside').toggleClass('hidemenu');
			$('.lt_main').toggleClass('hidemenu');
			$('.lt_topbar').toggleClass('hidemenu');
		})
		//3.点击退出按钮，弹出模态框
		$('.icon-logout').click(function(){
			$('.logoutModal').modal('show');
		})
		//4.点击模态框退出按钮，返回登陆页
		$('.logoutBtn').click(function(){
			//发送ajax请求退出接口，成功后返回登陆页
			$.ajax({
				url:"/employee/employeeLogout",
				type:"get",
				dataType:"json",
				success:function(info){
					console.log(info);
					if(info.success){
						location.href="login1.html"
					}
				}
			})
		})
		//5.判断用户是否登录模块，发送ajax请求到接口，如果返回失败400，拦截到登录页
		if(location.href.indexOf("login1.html")===-1){
			$.ajax({
				url:"/employee/checkRootLogin",
				dataType:'json',
				type:"get",
				success:function(info){
					console.log(info);
					if(info.success){
						//啥也不干
					}
					//为了防止死循环，当在登陆页时不进行判断
					if(info.error===400){
						location.href="login1.html";
					}
				}
			})
		}
	})